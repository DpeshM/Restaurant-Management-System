<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restaurant Management System</title>
    <!-- CSS Files -->
    <link rel="stylesheet" href="style.css">
    <!-- Add Font Awesome for icons if needed -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="logo">Restaurant Pro</div>
        <div class="header-right">
            <div class="time-display" id="currentTime"></div>
            <button class="btn btn-settings" onclick="openSettingsModal()">
                <i class="fas fa-cog"></i> Settings
            </button>
        </div>
    </header>

    <div class="tabs">
        <button class="tab active" onclick="switchTab('tables')">
            <i class="fas fa-table-cells"></i> Tables
        </button>
        <button class="tab" onclick="switchTab('menu')">
            <i class="fas fa-utensils"></i> Menu
        </button>
        <button class="tab" onclick="switchTab('kitchen')">
            <i class="fas fa-kitchen-set"></i> Kitchen
        </button>
        <button class="tab" onclick="switchTab('checkout')">
            <i class="fas fa-cash-register"></i> Checkout
        </button>
    </div>

    <div id="tables" class="tab-content active">
        <div class="section-title">
            <h2><i class="fas fa-table-cells"></i> Table Management</h2>
            <div>
                <button class="btn btn-primary" onclick="openAddTableModal()">
                    <i class="fas fa-plus"></i> Add Table
                </button>
                <button class="btn btn-outline" onclick="refreshTables()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
        </div>
        <div class="cards-grid" id="tablesList">
            <!-- Tables will be loaded here -->
            <div class="loading-spinner" id="tablesLoading">
                <div class="spinner"></div>
                <p>Loading tables...</p>
            </div>
        </div>
    </div>

    <div id="menu" class="tab-content">
        <div class="section-title">
            <h2><i class="fas fa-utensils"></i> Menu Management</h2>
            <div>
                <button class="btn btn-primary" onclick="openAddMenuItemModal()">
                    <i class="fas fa-plus"></i> Add Item
                </button>
                <button class="btn btn-outline" onclick="refreshMenu()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
        </div>
        <div id="menuList">
            <!-- Menu items will be loaded here -->
            <div class="loading-spinner" id="menuLoading">
                <div class="spinner"></div>
                <p>Loading menu...</p>
            </div>
        </div>
    </div>

    <div id="kitchen" class="tab-content">
        <div class="section-title">
            <h2><i class="fas fa-kitchen-set"></i> Kitchen Display</h2>
            <div>
                <button class="btn btn-outline" onclick="filterOrders('pending')">
                    <i class="fas fa-clock"></i> Pending
                </button>
                <button class="btn btn-success" onclick="filterOrders('ready')">
                    <i class="fas fa-check"></i> Ready
                </button>
                <button class="btn btn-outline" onclick="filterOrders('all')">
                    <i class="fas fa-list"></i> All
                </button>
            </div>
        </div>
        <div id="kitchenOrders" class="cards-grid">
            <!-- Kitchen orders will be loaded here -->
            <div class="loading-spinner" id="kitchenLoading">
                <div class="spinner"></div>
                <p>Loading kitchen orders...</p>
            </div>
        </div>
    </div>

    <div id="checkout" class="tab-content">
        <div class="section-title">
            <h2><i class="fas fa-cash-register"></i> Checkout & Payment</h2>
            <div>
                <button class="btn btn-primary" onclick="refreshCheckout()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
                <button class="btn btn-success" onclick="generateDailyReport()">
                    <i class="fas fa-chart-bar"></i> Daily Report
                </button>
            </div>
        </div>
        <div id="checkoutContent">
            <!-- Checkout content will be loaded here -->
            <div class="loading-spinner" id="checkoutLoading">
                <div class="spinner"></div>
                <p>Loading checkout data...</p>
            </div>
        </div>
    </div>

    <!-- Include all modals from previous HTML -->
    <div id="settingsModal" class="modal">
        <!-- Settings modal content -->
    </div>

    <div id="addTableModal" class="modal">
        <!-- Add table modal content -->
    </div>

    <div id="addMenuItemModal" class="modal">
        <!-- Add menu item modal content -->
    </div>

    <div id="createOrderModal" class="modal">
        <!-- Create order modal content -->
    </div>

    <div id="paymentModal" class="modal">
        <!-- Payment modal content -->
    </div>

    <div id="notification" class="notification"></div>

    <!-- JavaScript Files -->
    <!-- Import Supabase client first -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- Your custom modules -->
    <script type="module" src="supabase.js"></script>
    <script type="module" src="main.js"></script>
    
    <!-- Include Google Apps Script if needed -->
    <script>
        // Global variables
        let currentRestaurantId = null;
        let currentTable = null;
        let selectedItems = [];
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            updateTime();
            setInterval(updateTime, 60000); // Update time every minute
        });
        
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', {
                hour12: true,
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            const dateString = now.toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            document.getElementById('currentTime').innerHTML = `
                <i class="fas fa-calendar-alt"></i> ${dateString}<br>
                <i class="fas fa-clock"></i> ${timeString}
            `;
        }
    </script>
</body>
</html>
